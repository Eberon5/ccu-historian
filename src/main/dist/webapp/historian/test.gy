import groovy.transform.Field
import org.slf4j.LoggerFactory

@Field
private final static log = LoggerFactory.getLogger('mdz.ccuhistorian.webapp.Test')

utils.catchToLog(log) {
	request.setAttribute('log', log)
	request.setAttribute('page-begin-title', 'CCU-Historian: Trend-Darstellung')
	include 'page-begin.gy'
	
	def ctx=request.session.getAttribute('ctx')
	if (ctx.user.loggedIn) {
		
		include 'controllers/datapoints.gy'
		include 'controllers/trend-options.gy'
		
		html.h1 class:'ui-widget-header ui-corner-top', 'Trend-Darstellung'
		html.div(class:'ui-widget-content', style:'padding: 0.5em;') {
			html.form {
				div(id:'tabs', class:'ui-corner-all') {
					ul {
						li { a href:'#timerange', 'Zeitbereich' }
						li { a href:'#datapoints', 'Datenpunkte' }
						li { a href:'#options', 'Optionen / Gruppen' }
					}
					div(id:'timerange') {
						p 'A'
					}
					div(id:'datapoints', '') {
						p 'B'
						include 'views/datapoints.html'
					}
					div(id:'options', '') {
						p 'C'
						include 'views/trend-options.html'
					}
				}
				p 'asdasdasda'
				script { mkp.yieldUnescaped '_( "#tabs" ).tabs()' }
			}
		}
		html.h3(class:'ui-widget-header ui-corner-bottom') { mkp.yieldUnescaped '&nbsp;' }
	}
	include 'page-end.gy'
} // catchToLog
